!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("axios"),require("lodash.clonedeep"),require("lodash.isequal"),require("vue")):"function"==typeof define&&define.amd?define(["exports","axios","lodash.clonedeep","lodash.isequal","vue"],e):e((t||self).formjs={},t.axios,t.cloneDeep,t.isEqual,t.Vue)}(this,function(t,e,r,n,i){function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=/*#__PURE__*/o(e),u=/*#__PURE__*/o(r),c=/*#__PURE__*/o(n);function a(){return a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a.apply(this,arguments)}function f(t){throw new TypeError('"'+t+'" is read-only')}var d=/*#__PURE__*/function(){function t(){}var e=t.prototype;return e.visit=function(t,e){var r=a({method:"get",data:{},onSuccess:function(){},onError:function(){},onFinish:function(){}},e),n="string"==typeof t?function(t){return new URL(t.toString(),window.location.toString())}(t):t,i=r.onSuccess,o=r.onError,u=r.onFinish;s.default({method:r.method,url:n.href,data:r.data}).then(function(t){return i(t)}).catch(function(t){var e={};if(422===t.response.status){var r=t.response.data.errors;Object.keys(r).forEach(function(t){e[t]=r[t][0]})}return o(e)}).then(function(){return u()})},e.get=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),this.visit(t,a({},r,{method:"get",data:e}))},e.post=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),this.visit(t,a({},r,{method:"post",data:e}))},e.put=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),this.visit(t,a({},r,{method:"put",data:e}))},e.delete=function(t,e){return void 0===e&&(e={}),this.visit(t,a({},e,{method:"delete"}))},t}(),h=new d;t.Http=h,t.useForm=function(){var t=[].slice.call(arguments),e=("string"==typeof t[0]?t[1]:t[0])||{},r=u.default(e),n=function(t){return t},o=new d,s=i.reactive(a({},e,{errors:{},isDirty:!1,processing:!1,transform:function(t){return n=t,this},data:function(){var t=this;return Object.keys(e).reduce(function(e,r){return e[r]=t[r],e},{})},defaults:function(t,e){var n;return void 0===t?(this.data(),f("defaults")):(Object.assign({},u.default(r),e?((n={})[t]=e,n):t),f("defaults")),this},setError:function(t,e){var r;return Object.assign(this.errors,e?((r={})[t]=e,r):t),this.hasErrors=Object.keys(this.errors).length>0,this},reset:function(){var t=[].slice.call(arguments),e=u.default(r);return Object.assign(this,0===t.length?e:Object.keys(e).filter(function(e){return t.includes(e)}).reduce(function(t,r){return t[r]=e[r],t},{})),this},clearErrors:function(){var t=this,e=[].slice.call(arguments);return this.errors=Object.keys(this.errors).reduce(function(r,n){var i;return a({},r,e.length>0&&!e.includes(n)?((i={})[n]=t.errors[n],i):{})},{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit:function(t,e,r){var i=this,s=this;void 0===r&&(r={}),this.processing=!0;var u=n(this.data()),c=a({},r,{onSuccess:function(t){try{var e=function(t){return s.isDirty=!1,t};return s.processing=!1,Promise.resolve(r.onSuccess?Promise.resolve(r.onSuccess(t)).then(e):e(null))}catch(t){return Promise.reject(t)}},onError:function(t){if(i.processing=!1,i.clearErrors().setError(t),r.onError)return r.onError(t)},onFinish:function(){if(i.processing=!1,r.onFinish)return r.onFinish()}});"delete"===t?Inertia.delete(e,a({},c,{data:u})):o[t](e,u,c)},get:function(t,e){this.submit("post",t,e)},post:function(t,e){this.submit("post",t,e)},put:function(t,e){this.submit("put",t,e)},delete:function(t,e){this.submit("delete",t,e)}}));return i.watch(s,function(t){s.isDirty=!c.default(s.data(),r)},{immediate:!0,deep:!0}),s}});
//# sourceMappingURL=index.umd.js.map
