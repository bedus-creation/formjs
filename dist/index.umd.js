!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("axios"),require("lodash.clonedeep"),require("lodash.isequal"),require("vue")):"function"==typeof define&&define.amd?define(["exports","axios","lodash.clonedeep","lodash.isequal","vue"],t):t((e||self).formjs={},e.axios,e.cloneDeep,e.isEqual,e.Vue)}(this,function(e,t,r,s,n){function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=/*#__PURE__*/o(t),a=/*#__PURE__*/o(r),c=/*#__PURE__*/o(s);class u{visit(e,t){const r={method:"get",data:{},onSuccess:()=>{},onError:()=>{},onFinish:()=>{},...t};let s="string"==typeof e?function(e){return new URL(e.toString(),window.location.toString())}(e):e;const{onSuccess:n,onError:o,onFinish:a}=r;i.default({method:r.method,url:s.href,data:r.data}).then(e=>n(e)).catch(e=>{const t={};if(422===e.response?.status){const r=e.response.data.errors;Object.keys(r).forEach(e=>{t[e]=r[e][0]})}return o(t)}).then(()=>a())}get(e,t={},r={}){return this.visit(e,{...r,method:"get",data:t})}post(e,t={},r={}){return this.visit(e,{...r,method:"post",data:t})}put(e,t={},r={}){return this.visit(e,{...r,method:"put",data:t})}delete(e,t={}){return this.visit(e,{...t,method:"delete"})}}function l(e){return e instanceof File||e instanceof Blob||e instanceof FileList&&e.length>0||e instanceof FormData&&Array.from(e.values()).some(e=>l(e))||"object"==typeof e&&null!==e&&Object.values(e).some(e=>l(e))}function h(e,t=new FormData,r=null){e=e||{};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&f(t,d(r,s),e[s]);return t}function d(e,t){return e?e+"["+t+"]":t}function f(e,t,r){return Array.isArray(r)?Array.from(r.keys()).forEach(s=>f(e,d(t,s.toString()),r[s])):r instanceof Date?e.append(t,r.toISOString()):r instanceof File?e.append(t,r,r.name):r instanceof Blob?e.append(t,r):"boolean"==typeof r?e.append(t,r?"1":"0"):"string"==typeof r?e.append(t,r):"number"==typeof r?e.append(t,`${r}`):null==r?e.append(t,""):void h(r,e,t)}const p=new u;e.Http=p,e.useForm=function(){var e=[].slice.call(arguments);const t=("string"==typeof e[0]?e[1]:e[0])||{},r=a.default(t);let s=e=>e;const o=new u,i=n.reactive({...t,errors:{},isDirty:!1,processing:!1,transform(e){return s=e,this},data(){return Object.keys(t).reduce((e,t)=>(e[t]=this[t],e),{})},defaults(e,t){return r=void 0===e?this.data():Object.assign({},a.default(r),t?{[e]:t}:e),this},setError(e,t){return Object.assign(this.errors,t?{[e]:t}:e),this.hasErrors=Object.keys(this.errors).length>0,this},reset(){var e=[].slice.call(arguments);const t=a.default(r);return Object.assign(this,0===e.length?t:Object.keys(t).filter(t=>e.includes(t)).reduce((e,r)=>(e[r]=t[r],e),{})),this},clearErrors(){var e=[].slice.call(arguments);return this.errors=Object.keys(this.errors).reduce((t,r)=>({...t,...e.length>0&&!e.includes(r)?{[r]:this.errors[r]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(e,t,r={}){const n=this;this.processing=!0;let i=s(this.data());!l(i)||i instanceof FormData||(i=h(i));const a={...r,onSuccess:function(e){try{function t(e){return n.isDirty=!1,e}return n.processing=!1,Promise.resolve(r.onSuccess?Promise.resolve(r.onSuccess(e)).then(t):t(null))}catch(s){return Promise.reject(s)}},onError:e=>{if(this.processing=!1,this.clearErrors().setError(e),r.onError)return r.onError(e)},onFinish:()=>{if(this.processing=!1,r.onFinish)return r.onFinish()}};"delete"===e?Inertia.delete(t,{...a,data:i}):o[e](t,i,a)},get(e,t){this.submit("post",e,t)},post(e,t){this.submit("post",e,t)},put(e,t){this.submit("put",e,t)},delete(e,t){this.submit("delete",e,t)}});return n.watch(i,e=>{i.isDirty=!c.default(i.data(),r)},{immediate:!0,deep:!0}),i}});
//# sourceMappingURL=index.umd.js.map
