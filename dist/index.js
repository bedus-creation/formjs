var t=require("axios"),e=require("lodash.clonedeep"),r=require("lodash.isequal"),s=require("vue");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=/*#__PURE__*/n(t),i=/*#__PURE__*/n(e),a=/*#__PURE__*/n(r);class c{visit(t,e){const r={method:"get",data:{},onSuccess:()=>{},onError:()=>{},onFinish:()=>{},...e};let s="string"==typeof t?function(t){return new URL(t.toString(),window.location.toString())}(t):t;const{onSuccess:n,onError:i,onFinish:a}=r;o.default({method:r.method,url:s.href,data:r.data}).then(t=>n(t)).catch(t=>{const e={};if(422===t.response?.status){const r=t.response.data.errors;Object.keys(r).forEach(t=>{e[t]=r[t][0]})}return i(e)}).then(()=>a())}get(t,e={},r={}){return this.visit(t,{...r,method:"get",data:e})}post(t,e={},r={}){return this.visit(t,{...r,method:"post",data:e})}put(t,e={},r={}){return this.visit(t,{...r,method:"put",data:e})}delete(t,e={}){return this.visit(t,{...e,method:"delete"})}}function u(t){return t instanceof File||t instanceof Blob||t instanceof FileList&&t.length>0||t instanceof FormData&&Array.from(t.values()).some(t=>u(t))||"object"==typeof t&&null!==t&&Object.values(t).some(t=>u(t))}function l(t,e=new FormData,r=null){t=t||{};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&d(e,h(r,s),t[s]);return e}function h(t,e){return t?t+"["+e+"]":e}function d(t,e,r){return Array.isArray(r)?Array.from(r.keys()).forEach(s=>d(t,h(e,s.toString()),r[s])):r instanceof Date?t.append(e,r.toISOString()):r instanceof File?t.append(e,r,r.name):r instanceof Blob?t.append(e,r):"boolean"==typeof r?t.append(e,r?"1":"0"):"string"==typeof r?t.append(e,r):"number"==typeof r?t.append(e,`${r}`):null==r?t.append(e,""):void l(r,t,e)}const p=new c;exports.Http=p,exports.useForm=function(){var t=[].slice.call(arguments);const e=("string"==typeof t[0]?t[1]:t[0])||{},r=i.default(e);let n=t=>t;const o=new c,h=s.reactive({...e,errors:{},isDirty:!1,processing:!1,transform(t){return n=t,this},data(){return Object.keys(e).reduce((t,e)=>(t[e]=this[e],t),{})},defaults(t,e){return r=void 0===t?this.data():Object.assign({},i.default(r),e?{[t]:e}:t),this},setError(t,e){return Object.assign(this.errors,e?{[t]:e}:t),this.hasErrors=Object.keys(this.errors).length>0,this},reset(){var t=[].slice.call(arguments);const e=i.default(r);return Object.assign(this,0===t.length?e:Object.keys(e).filter(e=>t.includes(e)).reduce((t,r)=>(t[r]=e[r],t),{})),this},clearErrors(){var t=[].slice.call(arguments);return this.errors=Object.keys(this.errors).reduce((e,r)=>({...e,...t.length>0&&!t.includes(r)?{[r]:this.errors[r]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(t,e,r={}){const s=this;this.processing=!0;let i=n(this.data());!u(i)||i instanceof FormData||(i=l(i));const a={...r,onSuccess:function(t){try{function e(t){return s.isDirty=!1,t}return s.processing=!1,Promise.resolve(r.onSuccess?Promise.resolve(r.onSuccess(t)).then(e):e(null))}catch(n){return Promise.reject(n)}},onError:t=>{if(this.processing=!1,this.clearErrors().setError(t),r.onError)return r.onError(t)},onFinish:()=>{if(this.processing=!1,r.onFinish)return r.onFinish()}};"delete"===t?Inertia.delete(e,{...a,data:i}):o[t](e,i,a)},get(t,e){this.submit("post",t,e)},post(t,e){this.submit("post",t,e)},put(t,e){this.submit("put",t,e)},delete(t,e){this.submit("delete",t,e)}});return s.watch(h,t=>{h.isDirty=!a.default(h.data(),r)},{immediate:!0,deep:!0}),h};
//# sourceMappingURL=index.js.map
